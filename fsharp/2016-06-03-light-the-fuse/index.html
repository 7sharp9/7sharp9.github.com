<!doctype html><html><head><title>Light The Fuse &#183; 7sharp9</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=generator content="Hugo 0.82.1"><link rel=stylesheet href=https://7sharp9.dev/css/vec.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.ico><link href rel=alternate type=application/rss+xml title=7sharp9></head><body><header><nav><ul><li class=pull-left><a href=https://7sharp9.dev/>/Home</a></li><li class=pull-left><a href=/about>/About</a></li><li class=pull-left><a href=/fsharp>/F#</a></li><li class=pull-left><a href=/running>/Running</a></li><li class=pull-left><a href=/elm>/Elm</a></li><li class=pull-right><a href><i class="fas fa-rss"></i></a></li></ul></nav></header><div class="content wide"><section class=post><h1 class=post-title><a href=https://7sharp9.dev/fsharp/2016-06-03-light-the-fuse/>Light The Fuse</a></h1><span class=post-date>Jun 3, 2016</span><div class=post-content><p>In this post Im going to be introducing something new and exciting the combination of F#, Fable and Fuse. If I was American I might say this was the holy trinity of awesomeness!</p><p>This is the start of an exciting new series on using F# as a transpiling language to &ldquo;light the Fuse&rdquo; (pun intended) on new platform and opportunities for F#.</p><p>OK, so now for the introductions&mldr;</p><hr><h1 id=what-is-fable>What is Fable</h1><p>Put simply Fable is a transpiler for F# that turn F# into JavaScript. Lets face it JavaScript is really pervasive but not everyone wants to write it. You can read about how Fable works <a href=http://fsprojects.github.io/Fable/>here</a></p><h1 id=what-is-fuse>What is fuse?</h1><p>Taken from their site this is what fuse is in a nutshell:</p><h2 id=fuse-is-for-mobile-app-designers-and-developers>FUSE IS FOR MOBILE APP DESIGNERS AND DEVELOPERS</h2><p>Create and update the look and feel for native apps in real time
on multiple devices simultaneously.</p><p>Fuse is a set of tools (currently in beta) that makes design and developing native mobile apps for iOS and Android fast, easy and fun. Fuse is free, and we’re actively working towards making it Open Source as well.</p><p>Fuse introduces UX Markup - a XML-based language for creating truly native, data-driven, responsive, smoothly animated and highly interactive experiences, while sharing most of the code between iOS and Android. UX is easy to learn and incredibly powerful.</p><p>Fuse is fast. Based on Uno, a language which compiles down to pure C++ code, and seamlessly interops with Objective-C (iOS) and Java (Android) where needed. The UI is rendered using native platform controls, OpenGL or a combination (best of both worlds).</p><p>For business logic, Fuse runs JavaScript on a separate thread on both iOS and Android, so your UI is fast and responsive no matter what it is doing. Fuse lets you call seamlessly into C++, Java and Objective-C libraries through Uno when you need it.</p><p>You can read about Fuse in more depth on their site <a href=https://www.fusetools.com/>here</a>, you really should take a look.</p><hr><h1 id=introducing-fable--fuse>Introducing <strong>Fable |> Fuse</strong></h1><p>Fable-Fuse is a set of packages that allows you use power of F# with <a href=https://www.fusetools.com/>Fuse</a>.</p><p>First of all lets have a little look at some declarative UI with Fuse.</p><p>This is taken from the original Fuse Sample titled <em><strong>Parsing JSON fetched over HTTP</strong></em> which is located <a href=https://www.fusetools.com/examples/http-json>here</a></p><figure><img src=https://res.cloudinary.com/fusetools/image/upload/w_450%2Ch_450%2Cdpr_1.0%2Cc_limit/examples/media/4343ca40291fab07d70ef87254204bed_http-json-example.webp></figure><pre><code>&lt;App Theme=&quot;Basic&quot; Background=&quot;#eee&quot;&gt;
    &lt;DockPanel&gt;
        &lt;StatusBarBackground Dock=&quot;Top&quot; /&gt;
        &lt;BottomBarBackground Dock=&quot;Bottom&quot; /&gt;
        &lt;ScrollView&gt;
            &lt;Grid ColumnCount=&quot;2&quot;&gt;
                &lt;JavaScript&gt;
                    var Observable = require(&quot;FuseJS/Observable&quot;);

                    var data = Observable();

                    fetch('http://az664292.vo.msecnd.net/files/ZjPdBhWNdPRMI4qK-colors.json')
                        .then(function(response) { return response.json(); })
                        .then(function(responseObject) { data.value = responseObject; });

                    module.exports = {
                        data: data
                    };
                &lt;/JavaScript&gt;
                &lt;Each Items=&quot;{data.colorsArray}&quot;&gt;
                    &lt;DockPanel Height=&quot;120&quot; Margin=&quot;10,0&quot;&gt;
                        &lt;Panel DockPanel.Dock=&quot;Top&quot; Margin=&quot;10&quot; Height=&quot;30&quot;&gt;
                            &lt;Rectangle Layer=&quot;Background&quot; CornerRadius=&quot;10&quot; Fill=&quot;#fff&quot;/&gt;
                            &lt;Text Value=&quot;{colorName}&quot; TextAlignment=&quot;Center&quot; Alignment=&quot;Center&quot; /&gt;
                        &lt;/Panel&gt;

                        &lt;Rectangle Layer=&quot;Background&quot; CornerRadius=&quot;10&quot; Fill=&quot;{hexValue}&quot;/&gt;
                    &lt;/DockPanel&gt;
                &lt;/Each&gt;
            &lt;/Grid&gt;
        &lt;/ScrollView&gt;
    &lt;/DockPanel&gt;
&lt;/App&gt;
</code></pre><p>You can see the UI mark-up is concise and easy to follow, also notice the JavaScript element which can be in-line, as shown here, or placed in a separate file. We will place this in a separate file so that we can transpile from F# using <a href=http://fsprojects.github.io/Fable/>Fable</a>.</p><pre><code>namespace Program
open Fable.Core
open Fuse
open Fable.Import
open Fable.Import.Fetch

module HttpJson =
    let data = Observable.create()
    promise {
        let! req = GlobalFetch.fetch (Url &quot;http://az664292.vo.msecnd.net/files/ZjPdBhWNdPRMI4qK-colors.json&quot;)
        let! json = req.json ()
        do (data.value &lt;- json) } |&gt; ignore
</code></pre><p>You can see here there is a custom computation expression that allows you to use JavaScrip promises, you could also use a pipeline oriented definition too, like this:</p><pre><code>GlobalFetch.fetch (Url &quot;http://az664292.vo.msecnd.net/files/ZjPdBhWNdPRMI4qK-colors.json&quot;)
|&gt; Promise.success (fun resp -&gt; resp.json())                                                                          
|&gt; Promise.success (fun json -&gt; data.value &lt;- json) 
|&gt; ignore
</code></pre><p>Or if you really really wanted to you could integrate this into an F# async with a little helper type extension:</p><pre><code>module AsyncExtensions =    
    type Microsoft.FSharp.Control.AsyncBuilder with
        member x.Bind(p, f) = 
            async.Bind (Async.AwaitPromise(p), f)
</code></pre><p>This would allow you to use a promise with an ordinary <code>let!</code></p><pre><code>async {
    let! req = GlobalFetch.fetch &quot;http://az664292.vo.msecnd.net/files/ZjPdBhWNdPRMI4qK-colors.json&quot;
    let! json = req.json ()
    do (data.value &lt;- json) } |&gt; Async.Start 
</code></pre><p>Anyway I digress, needless to say there are various options with promises and how to handle them with <strong>Fable |> Fuse</strong>.</p><figure><img src=https://i.imgur.com/P4YcEi7.png></figure><p>What&rsquo;s more because Fuse and Fable are real-time you can edit the UX definitions and it the application in real-time across multiple devices!</p><figure><img src=/img/fable-fuse/realtime.gif></figure><hr><h2 id=so-how-do-i-get-started-with-fable--fuse->So how do I get started with <strong>Fable |> Fuse</strong> ?</h2><p>Well you&rsquo;ll have to hold your horses, I was so excited to share this introductory post I haven&rsquo;t wrote that part yet. The package I&rsquo;m working on is still private while I finalise things and make it really easy and friendly to create applications with <strong>Fable |> Fuse</strong>.</p><p>Stay tuned as there will be more in this series next week as I discuss the more technical aspects and how to create your first <strong>Fable |> Fuse</strong> application.</p><p>If there is enough interest I will also live stream this on my <a href=https://www.livecoding.tv/7sharp9/>livecoding.tv channel</a>, please subscribe.</p><p>A really big thanks to Alfonso Garcia-Caro (<a href=https://twitter.com/alfonsogcnunez>@alfonsogcnunez</a>) creator of Fable for answering all my annoying questions. And Lars Thomas Denstad (<a href=https://twitter.com/COCPORN>@cocporn</a>) for help creating the Fuse API bindings for Fable.</p><p>Until next time!</p></div></section><section class="pagination clearfix"><a class="btn previous" href=https://7sharp9.dev/fsharp/2016-05-31-new-adventures/>New Adventures</a>
<a class="btn next" href=https://7sharp9.dev/fsharp/2016-07-06-fable-fuse-template/>Creating fuse applications with fable</a></section></div><footer><div class="footer-info pull-right">© 2021 Dave Thomas</div></footer><script src=https://7sharp9.dev/js/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-10152365-8','auto'),ga('send','pageview')</script></body></html>